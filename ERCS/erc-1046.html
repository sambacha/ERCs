<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>tokenURI Interoperability | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="tokenURI Interoperability | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-1046" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-1046" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">tokenURI Interoperability</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p><a href="./eip-721.md">ERC-721</a> introduced a <code class="language-plaintext highlighter-rouge">tokenURI</code> function for non-fungible tokens to handle miscellaneous metadata such as:</p>

<ul>
  <li>thumbnail image</li>
  <li>title</li>
  <li>description</li>
  <li>special asset properties</li>
  <li>etc.</li>
</ul>

<p>This ERC adds a <code class="language-plaintext highlighter-rouge">tokenURI</code> function to <a href="./eip-20.md">ERC-20</a>, and extends <a href="./eip-721.md">ERC-721</a> and <a href="./eip-1155.md">ERC-1155</a> to enable interoperability between all three types of token URI.</p>

<h2 id="motivation">Motivation</h2>

<p>See the note about the metadata extension in <a href="./eip-721.md#rationale">ERC-721</a>. The same arguments apply to ERC-20.</p>

<p>Being able to use similar mechanisms to extract metadata for ERC-20, ERC-721, ERC-1155, and future standards is useful for determining:</p>

<ul>
  <li>What type of token a contract is (if any);</li>
  <li>How to display a token to a user, either in an asset listing page or on a dedicated token page; and</li>
  <li>Determining the capabilities of the token</li>
</ul>

<h2 id="specification">Specification</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119 and RFC 8174.</p>

<h3 id="interoperability-metadata">Interoperability Metadata</h3>

<p>The following TypeScript interface is used in later sections:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Interoperability metadata.
 * This can be extended by other proposals.
 * 
 * All fields MUST be optional.
 * **Not every field has to be a boolean.** Any optional JSON-serializable object can be used by extensions.
 */</span>
<span class="kr">interface</span> <span class="nx">InteroperabilityMetadata</span> <span class="p">{</span>
    <span class="cm">/**
     * This MUST be true if this is ERC-1046 Token Metadata, otherwise, this MUST be omitted.
     * Setting this to true indicates to wallets that the address should be treated as an ERC-20 token.
     **/</span>
    <span class="nl">erc1046</span><span class="p">?:</span> <span class="nx">boolean</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>

    <span class="cm">/**
     * This MUST be true if this is ERC-721 Token Metadata, otherwise, this MUST be omitted.
     * Setting this to true indicates to wallets that the address should be treated as a ERC-721 token.
     **/</span>
    <span class="nl">erc721</span><span class="p">?:</span> <span class="nx">boolean</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>

    <span class="cm">/**
     * This MUST be true if this is ERC-1155 Token Metadata, otherwise, this MUST be omitted.
     * Setting this to true indicates to wallets that the address should be treated as a ERC-1155 token.
     **/</span>
    <span class="nl">erc1155</span><span class="p">?:</span> <span class="nx">boolean</span> <span class="o">|</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="erc-20-extension">ERC-20 Extension</h3>

<h4 id="erc-20-interface-extension">ERC-20 Interface Extension</h4>

<p>Compliant contracts MUST implement the following Solidity interface:</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="c1">/// @title  ERC-20 Metadata Extension
</span><span class="k">interface</span> <span class="n">ERC20TokenMetadata</span> <span class="cm">/* is ERC20 */</span> <span class="p">{</span>
    <span class="c1">/// @notice     Gets an ERC-721-like token URI
</span>    <span class="c1">/// @dev        The resolved data MUST be in JSON format and support ERC-1046's ERC-20 Token Metadata Schema
</span>    <span class="k">function</span> <span class="n">tokenURI</span><span class="p">()</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">string</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="erc-20-token-metadata-schema">ERC-20 Token Metadata Schema</h4>

<p>The resolved JSON of the <code class="language-plaintext highlighter-rouge">tokenURI</code> described in the ERC-20 Interface Extension section MUST conform to the following TypeScript interface:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Asset Metadata
 */</span>
<span class="kr">interface</span> <span class="nx">ERC20TokenMetadata</span> <span class="p">{</span>
    <span class="cm">/**
     * Interoperabiliy, to differentiate between different types of tokens and their corresponding URIs.
     **/</span>
    <span class="nl">interop</span><span class="p">:</span> <span class="nx">InteroperabilityMetadata</span><span class="p">;</span>
    
    <span class="cm">/**
     * The name of the ERC-20 token. 
     * If the `name()` function is present in the ERC-20 token and returns a nonempty string, these MUST be the same value.
     */</span>
    <span class="nl">name</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    
    <span class="cm">/**
     * The symbol of the ERC-20 token. 
     * If the `symbol()` function is present in the ERC-20 token and returns a nonempty string, these MUST be the same value.
     */</span>
    <span class="nl">symbol</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    
    <span class="cm">/**
     * The decimals of the ERC-20 token. 
     * If the `decimals()` function is present in the ERC-20 token, these MUST be the same value.
     * Defaults to 18 if neither this parameter nor the ERC-20 `decimals()` function are present.
     */</span>
    <span class="nl">decimals</span><span class="p">?:</span> <span class="kr">number</span><span class="p">;</span>
    
    <span class="cm">/**
     * Provides a short one-paragraph description of the ERC-20 token, without any markup or newlines.
     */</span>
    <span class="nl">description</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    
    <span class="cm">/**
     * A URI pointing to a resource with mime type `image/*` that represents this token.
     * If the image is a bitmap, it SHOULD have a width between 320 and 1080 pixels
     * The image SHOULD have an aspect ratio between 1.91:1 and 4:5 inclusive.
     */</span>
    <span class="nl">image</span><span class="p">?:</span> <span class="kr">string</span><span class="p">;</span>
    
    <span class="cm">/**
     * One or more URIs each pointing to a resource with mime type `image/*` that represents this token.
     * If an image is a bitmap, it SHOULD have a width between 320 and 1080 pixels
     * Images SHOULD have an aspect ratio between 1.91:1 and 4:5 inclusive.
     */</span>
    <span class="nl">images</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>
    
    <span class="cm">/**
     * One or more URIs each pointing to a resource with mime type `image/*` that represent an icon for this token.
     * If an image is a bitmap, it SHOULD have a width between 320 and 1080 pixels, and MUST have a height equal to its width
     * Images MUST have an aspect ratio of 1:1, and use a transparent background
     */</span>
    <span class="nl">icons</span><span class="p">?:</span> <span class="kr">string</span><span class="p">[];</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="erc-721-extension">ERC-721 Extension</h3>

<h4 id="extension-to-the-erc-721-metadata-schema">Extension to the ERC-721 Metadata Schema</h4>

<p>Contracts that implement ERC-721 and use its token metadata URI SHOULD to use the following TypeScript extension to the metadata URI:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">ERC721TokenMetadataInterop</span> <span class="kd">extends</span> <span class="nx">ERC721TokenMetadata</span> <span class="p">{</span>
    <span class="cm">/**
     * Interoperabiliy, to avoid confusion between different token URIs
     **/</span>
    <span class="nl">interop</span><span class="p">:</span> <span class="nx">InteroperabilityMetadata</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="erc-1155-extension">ERC-1155 Extension</h3>

<h4 id="erc-1155-interface-extension">ERC-1155 Interface Extension</h4>

<p><a href="./eip-1155.md">ERC-1155</a>-compliant contracts using the metadata extension SHOULD implement the following Solidity interface:</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="c1">/// @title  ERC-1155 Metadata URI Interoperability Extension
</span><span class="k">interface</span> <span class="n">ERC1155TokenMetadataInterop</span> <span class="cm">/* is ERC1155 */</span> <span class="p">{</span>
    <span class="c1">/// @notice         Gets an ERC-1046-compliant ERC-1155 token URI
</span>    <span class="c1">/// @param  tokenId The token ID to get the URI of
</span>    <span class="c1">/// @dev            The resolved data MUST be in JSON format and support ERC-1046's Extension to the ERC-1155 Token Metadata Schema
</span>    <span class="c1">///                 This MUST be the same URI as the `uri(tokenId)` function, if present.
</span>    <span class="k">function</span> <span class="n">tokenURI</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">string</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="extension-to-the-erc-1155-metadata-schema">Extension to the ERC-1155 Metadata Schema</h4>

<p>Contracts that implement ERC-1155 and use its token metadata URI are RECOMMENDED to use the following extension to the metadata URI. Contracts that implement the interface described in the ERC-1155 Interface Extension section MUST use the following TypeScript extension:</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">ERC1155TokenMetadataInterop</span> <span class="kd">extends</span> <span class="nx">ERC1155TokenMetadata</span> <span class="p">{</span>
    <span class="cm">/**
     * Interoperabiliy, to avoid confusion between different token URIs
     **/</span>
    <span class="nl">interop</span><span class="p">:</span> <span class="nx">InteroperabilityMetadata</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="miscellaneous-recommendations">Miscellaneous Recommendations</h3>

<p>To save gas, it is RECOMMENDED for compliant contracts not to implement the <code class="language-plaintext highlighter-rouge">name()</code>, <code class="language-plaintext highlighter-rouge">symbol()</code>, or <code class="language-plaintext highlighter-rouge">decimals()</code> functions, and instead to only include them in the metadata URI. Additionally, for ERC-20 tokens, if the decimals is <code class="language-plaintext highlighter-rouge">18</code>, then it is NOT RECOMMENDED to include the <code class="language-plaintext highlighter-rouge">decimals</code> field in the metadata.</p>

<h2 id="rationale">Rationale</h2>

<p>This ERC makes adding metadata to ERC-20 tokens more straightforward for developers, with minimal to no disruption to the overall ecosystem. Using the same parameter name makes it easier to reuse code.</p>

<p>Additionally, the recommendations not to use ERC-20’s <code class="language-plaintext highlighter-rouge">name</code>, <code class="language-plaintext highlighter-rouge">symbol</code>, and <code class="language-plaintext highlighter-rouge">decimals</code> functions save gas.</p>

<p>Built-in interoperability is useful as otherwise it might not be easy to differentiate the type of the token. Interoperability could be done using <a href="./eip-165.md">ERC-165</a>, but static calls are time-inefficient for wallets and websites, and is generally inflexible. Instead, including interoperability data in the token URI increases flexibility while also giving a performance increase.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>This EIP is fully backwards compatible as its implementation simply extends the functionality of ERC-20 tokens and is optional. Additionally, it makes backward compatible recommendations for ERC-721 and ERC-1155 tokens.</p>

<h2 id="security-considerations">Security Considerations</h2>

<h3 id="server-side-request-forgery-ssrf">Server-Side Request Forgery (SSRF)</h3>

<p>Wallets should be careful about making arbitrary requests to URLs. As such, it is recommended for wallets to sanitize the URI by whitelisting specific schemes and ports. A vulnerable wallet could be tricked into, for example, modifying data on a locally-hosted redis database.</p>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
