<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Transaction Receipt URI | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="Transaction Receipt URI | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-2400" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-2400" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Transaction Receipt URI</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p>A transaction hash is not very meaningful on its own, because it looks just like any other hash, and it might lack important information for reading a transaction.</p>

<p>This standard includes all needed information for displaying a transaction and its details, such as <code class="language-plaintext highlighter-rouge">chainId</code>, <code class="language-plaintext highlighter-rouge">method</code> signature called, and <code class="language-plaintext highlighter-rouge">events</code> signatures emitted.</p>

<h2 id="motivation">Motivation</h2>

<p>Interoperability between ethereum clients, allowing different systems to agree on a standard way of representing submitted transactions hashes, optionally with necessary information for decoding transaction details.</p>

<h3 id="use-cases">Use-cases</h3>

<p>Transaction Receipt URIs embedded in QR-codes, hyperlinks in web-pages, emails or chat messages provide for robust cross-application signaling between very loosely coupled applications. A standardized URI format allows for instant invocation of the user’s preferred transaction explorer application. Such as:</p>

<ul>
  <li>In web3 (dapps, mining pools, exchanges), links would automatically open user’s preferred transaction explorer;</li>
  <li>In wallets, for users sharing transaction receipts easier;</li>
  <li>In chat applications, as a reply to an <a href="./eip-681.md">EIP-681</a> transaction request;</li>
  <li>In crypto vending machines, a QRCode can be displayed when transactions are submitted;</li>
  <li>Anywhere transaction receipts are presented to users.</li>
</ul>

<h2 id="specification">Specification</h2>

<h3 id="syntax">Syntax</h3>

<p>Transaction receipt URLs contain “ethereum” in their schema (protocol) part and are constructed as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>receipt                 = schema_part transaction_hash [ "@" chain_id ] [ "?" parameters ]
schema_part             = "ethereum:tx-" 
transaction_hash        = "0x" 64*HEXDIG 
chain_id                = 1*DIGIT
parameters              = parameter *( "&amp;" parameter )
parameter               = key "=" value
key                     = "method" / "events"
value                   = function_signature / event_list
function_signature      = function_name "(" TYPE *( "," TYPE) ")"
function_name           = STRING
event_list              = event_signature *( ";" event_signature )
event_signature         = event_name "(" event_type *( "," event_type) ")"
event_name              = STRING
event_type              = ["!"] TYPE
</code></pre></div></div>

<p>Where <code class="language-plaintext highlighter-rouge">TYPE</code> is a standard ABI type name, as defined in Ethereum Contract ABI specification. <code class="language-plaintext highlighter-rouge">STRING</code> is a URL-encoded unicode string of arbitrary length.</p>

<p>The exclamation symbol (<code class="language-plaintext highlighter-rouge">!</code>), in <code class="language-plaintext highlighter-rouge">event_type</code>, is used to identify indexed event parameters.</p>

<h3 id="semantics">Semantics</h3>

<p><code class="language-plaintext highlighter-rouge">transaction_hash</code> is mandatory. The hash must be looked up in the corresponding <code class="language-plaintext highlighter-rouge">chain_id</code> transaction history, if not found it should be looked into the pending transaction queue and rechecked until is found. If not found anequivalent error as “transaction not found error” should be shown instead of the transaction. When the transaction is pending, it should keep checking until the transaction is included in a block and becomes “unrevertable” (usually 12 blocks after transaction is included).</p>

<p><code class="language-plaintext highlighter-rouge">chain_id</code> is specified by <a href="./eip-155.md">EIP-155</a> optional and contains the decimal chain ID, such that transactions on various test and private networks can be represented as well. If no <code class="language-plaintext highlighter-rouge">chain_id</code> is present, the $ETH/mainnet (<code class="language-plaintext highlighter-rouge">1</code>) is considered.</p>

<p>If <code class="language-plaintext highlighter-rouge">method</code> is not present, this means that the transaction receipt URI does not specify details, or that it was a transaction with no calldata. When present it needs to be validated by comparing the first 4 bytes of transaction calldata with the first 4 bytes of the keccak256 hash of <code class="language-plaintext highlighter-rouge">method</code>, if invalid, an equivalent error as “method validation error” must be shown instead of the transaction.</p>

<p>If <code class="language-plaintext highlighter-rouge">events</code> is not present, this means that the transaction receipt URI does not specify details, or that the transaction did not raised any events. Pending and failed transactions don’t validate events, however, when transaction is successful (or changes from pending to success) and events are present in URI, each event in the <code class="language-plaintext highlighter-rouge">event_list</code> must occur at least once in the transaction receipt event logs, otherwise an equivalent error as “event validation error: {event(s) [$event_signature, …] not found}” should be shown instead of the transaction. A URI might contain the event signature for all, some or none of the raised events.</p>

<h4 id="examples">Examples</h4>

<h5 id="simple-eth-transfer">Simple ETH transfer:</h5>
<p><code class="language-plaintext highlighter-rouge">ethereum:tx-0x1143b5e38fe3cf585fb026fb9b5ce35c85a691786397dc8a23a07a62796d8172@1</code></p>

<h5 id="standard-token-transfer">Standard Token transfer:</h5>

<p><code class="language-plaintext highlighter-rouge">ethereum:tx-0x5375e805b0c6afa20daab8d37352bf09a533efb03129ba56dee869e2ce4f2f92@1?method="transfer(address,uint256)"&amp;events="Transfer(!address,!address,uint256)"</code></p>

<h5 id="complex-contract-transaction">Complex contract transaction:</h5>

<p><code class="language-plaintext highlighter-rouge">ethereum:tx-0x4465e7cce3c784f264301bfe26fc17609855305213ec74c716c7561154b76fec@1?method="issueAndActivateBounty(address,uint256,string,uint256,address,bool,address,uint256)"&amp;events="Transfer(!address,!address,uint256);BountyIssued(uint256);ContributionAdded(uint256,!address,uint256);BountyActivated(uint256,address)"</code></p>

<h2 id="rationale">Rationale</h2>

<p>The goal of this standard envolves only the transport of submitted transactions, and therefore transaction data must be loaded from blockchain or pending transaction queue, which also serves as a validation of the transaction existence.</p>

<p>Transaction hash not found is normal in fresh transactions, but can also mean that effectively a transaction was never submitted or have been replaced (through “higher gasPrice” nonce override or through an uncle/fork).</p>

<p>In order to decode transaction parameters and events, a part of the ABI is required. The transaction signer have to know the ABI to sign a transaction, and is also who is creating a transaction receipt, so the transaction receipt can optionally be shared with the information needed to decode the transaction call data and it’s events.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>Future upgrades that are partially or fully incompatible with this proposal must use a prefix other than <code class="language-plaintext highlighter-rouge">tx-</code> that is separated by a dash (-) character from whatever follows it.</p>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
