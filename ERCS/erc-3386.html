<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>ERC-721 and ERC-1155 to ERC-20 Wrapper | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="ERC-721 and ERC-1155 to ERC-20 Wrapper | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-3386" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-3386" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">ERC-721 and ERC-1155 to ERC-20 Wrapper</h1>
  </header>

  <div class="post-content">
    <h2 id="simple-summary">Simple Summary</h2>
<p>A standard interface for contracts that create generic ERC-20 tokens which derive from a pool of unique ERC-721/ERC-1155 tokens.</p>

<h2 id="abstract">Abstract</h2>

<p>This standard outlines a smart contract interface to wrap identifiable tokens with fungible tokens. This allows for derivative <a href="./eip-20.md">ERC-20</a> tokens to be minted by locking the base <a href="./eip-721.md">ERC-721</a> non-fungible tokens and <a href="./eip-1155.md">ERC-1155</a> multi tokens into a pool. The derivative tokens can be burned to redeem base tokens out of the pool. These derivatives have no reference to the unique id of these base tokens, and should have a proportional rate of exchange with the base tokens. As representatives of the base tokens, these generic derivative tokens can be traded and otherwise utilized according to ERC-20, such that the unique identifier of each base token is irrelevant.</p>

<p>ERC-721 and ERC-1155 tokens are considered valid base, tokens because they have unique identifiers and are transferred according to similar rules. This allows for both ERC-721 NFTs and ERC-1155 Multi-Tokens to be wrapped under a single common interface.</p>

<h2 id="motivation">Motivation</h2>

<p>The ERC-20 token standard is the most widespread and liquid token standard on Ethereum. ERC-721 and ERC-1155 tokens on the other hand can only be transferred by their individual ids, in whole amounts. Derivative tokens allow for exposure to the base asset while benefiting from contracts which utilize ERC-20 tokens. This allows for the base tokens to be fractionalized, traded and pooled generically on AMMs, collateralized, and be used for any other ERC-20 type contract. Several implementations of this proposal already exist without a common standard.</p>

<p>Given a fixed exchange rate between base and derivative tokens, the value of the derivative token is proportional to the floor price of the pooled tokens. With the derivative tokens being used in AMMs, there is opportunity for arbitrage between derived token markets and the base NFT markets. By specifying a subset of base tokens which may be pooled, the difference between the lowest and highest value token in the pool may be minimized. This allows for higher value tokens within a larger set to be poolable. Additionally, price calculations using methods such as Dutch auctions, as implemented by NFT20, allow for price discovery of subclasses of base tokens. This allows the provider of a higher value base token to receive a proportionally larger number of derivative tokens than a token worth the floor price would receive.</p>

<h2 id="specification">Specification</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC 2119</a>.</p>

<p><strong>Every IWrapper compliant contract must implement the <code class="language-plaintext highlighter-rouge">IWrapper</code> and <code class="language-plaintext highlighter-rouge">ERC165</code> interfaces</strong> :</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span>

<span class="cm">/**
    @title IWrapper Identifiable Token Wrapper Standard
    @dev {Wrapper} refers to any contract implementing this interface.
    @dev {Base} refers to any ERC-721 or ERC-1155 contract. It MAY be the {Wrapper}.
    @dev {Pool} refers to the contract which holds the {Base} tokens. It MAY be the {Wrapper}.
    @dev {Derivative} refers to the ERC-20 contract which is minted/burned by the {Wrapper}. It MAY be the {Wrapper}.
    @dev All uses of "single", "batch" refer to the number of token ids. This includes individual ERC-721 tokens by id, and multiple ERC-1155 by id. An ERC-1155 `TransferSingle` event may emit with a `value` greater than `1`, but it is still considered a single token.
    @dev All parameters named `_amount`, `_amounts` refer to the `value` parameters in ERC-1155. When using this interface with ERC-721, `_amount` MUST be 1, and `_amounts` MUST be either an empty list or a list of 1 with the same length as `_ids`.
*/</span>
<span class="k">interface</span> <span class="n">IWrapper</span> <span class="cm">/* is ERC165 */</span> <span class="p">{</span>
    <span class="cm">/**
     * @dev MUST emit when a mint occurs where a single {Base} token is received by the {Pool}.
     * The `_from` argument MUST be the address of the account that sent the {Base} token.
     * The `_to` argument MUST be the address of the account that received the {Derivative} token(s).
     * The `_id` argument MUST be the id of the {Base} token transferred.
     * The `_amount` argument MUST be the number of {Base} tokens transferred.
     * The `_value` argument MUST be the number of {Derivative} tokens minted.
     */</span>
    <span class="k">event</span> <span class="n">MintSingle</span> <span class="p">(</span><span class="kt">address</span> <span class="k">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="k">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_id</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_amount</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">);</span>

    <span class="cm">/**
     * @dev MUST emit when a mint occurs where multiple {Base} tokens are received by the {Wrapper}.
     * The `_from` argument MUST be the address of the account that sent the {Base} tokens.
     * The `_to` argument MUST be the address of the account that received the {Derivative} token(s).
     * The `_ids` argument MUST be the list ids of the {Base} tokens transferred.
     * The `_amounts` argument MUST be the list of the numbers of {Base} tokens transferred.
     * The `_value` argument MUST be the number of {Derivative} tokens minted.
     */</span>
    <span class="k">event</span> <span class="n">MintBatch</span> <span class="p">(</span><span class="kt">address</span> <span class="k">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="k">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span><span class="p">[]</span> <span class="n">_ids</span><span class="p">,</span> <span class="kt">uint256</span><span class="p">[]</span> <span class="n">_amounts</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">);</span>

    <span class="cm">/**
     * @dev MUST emit when a burn occurs where a single {Base} token is sent by the {Wrapper}.
     * The `_from` argument MUST be the address of the account that sent the {Derivative} token(s).
     * The `_to` argument MUST be the address of the account that received the {Base} token.
     * The `_id` argument MUST be the id of the {Base} token transferred.
     * The `_amount` argument MUST be the number of {Base} tokens transferred.
     * The `_value` argument MUST be the number of {Derivative} tokens burned.
     */</span>
    <span class="k">event</span> <span class="n">BurnSingle</span> <span class="p">(</span><span class="kt">address</span> <span class="k">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="k">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_id</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_amount</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">);</span>

    <span class="cm">/**
     * @dev MUST emit when a mint occurs where multiple {Base} tokens are sent by the {Wrapper}.
     * The `_from` argument MUST be the address of the account that sent the {Derivative} token(s).
     * The `_to` argument MUST be the address of the account that received the {Base} tokens.
     * The `_ids` argument MUST be the list of ids of the {Base} tokens transferred.
     * The `_amounts` argument MUST be the list of the numbers of {Base} tokens transferred.
     * The `_value` argument MUST be the number of {Derivative} tokens burned.
     */</span>
    <span class="k">event</span> <span class="n">BurnBatch</span> <span class="p">(</span><span class="kt">address</span> <span class="k">indexed</span> <span class="n">_from</span><span class="p">,</span> <span class="kt">address</span> <span class="k">indexed</span> <span class="n">_to</span><span class="p">,</span> <span class="kt">uint256</span><span class="p">[]</span> <span class="n">_ids</span><span class="p">,</span> <span class="kt">uint256</span><span class="p">[]</span> <span class="n">_amounts</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_value</span><span class="p">);</span>

    <span class="cm">/**
     * @notice Transfers the {Base} token with `_id` from `msg.sender` to the {Pool} and mints {Derivative} token(s) to `_to`.
     * @param _to       Target address.
     * @param _id       Id of the {Base} token.
     * @param _amount   Amount of the {Base} token.
     *
     * Emits a {MintSingle} event.
     */</span>
    <span class="k">function</span> <span class="n">mint</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="n">_id</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="n">_amount</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @notice Transfers `_amounts[i]` of the {Base} tokens with `_ids[i]` from `msg.sender` to the {Pool} and mints {Derivative} token(s) to `_to`.
     * @param _to       Target address.
     * @param _ids      Ids of the {Base} tokens.
     * @param _amounts  Amounts of the {Base} tokens.
     *
     * Emits a {MintBatch} event.
     */</span>
    <span class="k">function</span> <span class="n">batchMint</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_ids</span><span class="p">,</span>
        <span class="kt">uint256</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_amounts</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @notice Burns {Derivative} token(s) from `_from` and transfers `_amounts` of some {Base} token from the {Pool} to `_to`. No guarantees are made as to what token is withdrawn.
     * @param _from     Source address.
     * @param _to       Target address.
     * @param _amount   Amount of the {Base} tokens.
     *
     * Emits either a {BurnSingle} or {BurnBatch} event.
     */</span>
    <span class="k">function</span> <span class="n">burn</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_from</span><span class="p">,</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="n">_amount</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @notice Burns {Derivative} token(s) from `_from` and transfers `_amounts` of some {Base} tokens from the {Pool} to `_to`. No guarantees are made as to what tokens are withdrawn.
     * @param _from     Source address.
     * @param _to       Target address.
     * @param _amounts  Amounts of the {Base} tokens.
     *
     * Emits either a {BurnSingle} or {BurnBatch} event.
     */</span>
    <span class="k">function</span> <span class="n">batchBurn</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_from</span><span class="p">,</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_amounts</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @notice Burns {Derivative} token(s) from `_from` and transfers `_amounts[i]` of the {Base} tokens with `_ids[i]` from the {Pool} to `_to`.
     * @param _from     Source address.
     * @param _to       Target address.
     * @param _id       Id of the {Base} token.
     * @param _amount   Amount of the {Base} token.
     *
     * Emits either a {BurnSingle} or {BurnBatch} event.
     */</span>
    <span class="k">function</span> <span class="n">idBurn</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_from</span><span class="p">,</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="n">_id</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="n">_amount</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @notice Burns {Derivative} tokens from `_from` and transfers `_amounts[i]` of the {Base} tokens with `_ids[i]` from the {Pool} to `_to`.
     * @param _from     Source address.
     * @param _to       Target address.
     * @param _ids      Ids of the {Base} tokens.
     * @param _amounts   Amounts of the {Base} tokens.
     *
     * Emits either a {BurnSingle} or {BurnBatch} event.
     */</span>
    <span class="k">function</span> <span class="n">batchIdBurn</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">_from</span><span class="p">,</span>
        <span class="kt">address</span> <span class="n">_to</span><span class="p">,</span>
        <span class="kt">uint256</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_ids</span><span class="p">,</span>
        <span class="kt">uint256</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_amounts</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="rationale">Rationale</h2>

<h3 id="naming">Naming</h3>

<p>The ERC-721/ERC-1155 tokens which are pooled are called {Base} tokens. Alternative names include:</p>
<ul>
  <li>Underlying.</li>
  <li>NFT. However, ERC-1155 tokens may be considered “semi-fungible”.</li>
</ul>

<p>The ERC-20 tokens which are minted/burned are called {Derivative} tokens. Alternative names include:</p>
<ul>
  <li>Wrapped.</li>
  <li>Generic.</li>
</ul>

<p>The function names <code class="language-plaintext highlighter-rouge">mint</code> and <code class="language-plaintext highlighter-rouge">burn</code> are borrowed from the minting and burning extensions to ERC-20. Alternative names include:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">mint</code>/<code class="language-plaintext highlighter-rouge">redeem</code> (<a href="https://nftx.org">NFTX</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">deposit</code>/<code class="language-plaintext highlighter-rouge">withdraw</code> (<a href="https://wrappedkitties.com/">WrappedKitties</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">wrap</code>/<code class="language-plaintext highlighter-rouge">unwrap</code> (<a href="https://etherscan.io/address/0x7c40c393dc0f283f318791d746d894ddd3693572">MoonCatsWrapped</a>)</li>
</ul>

<p>The function names <code class="language-plaintext highlighter-rouge">*idBurn</code> are chosen to reduce confusion on what is being burned. That is, the {Derivative} tokens are burned in order to redeem the id(s).</p>

<p>The wrapper/pool itself can be called an “Index fund” according to NFTX, or a “DEX” according to <a href="https://nft20.io">NFT20</a>. However, the {NFT20Pair} contract allows for direct NFT-NFT swaps which are out of the scope of this standard.</p>

<h3 id="minting">Minting</h3>
<p>Minting requires the transfer of the {Base} tokens into the {Pool} in exchange for {Derivative} tokens. The {Base} tokens deposited in this way MUST NOT be transferred again except through the burning functions. This ensures the value of the {Derivative} tokens is representative of the value of the {Base} tokens.</p>

<p>Alternatively to transferring the {Base} tokens into the {Pool}, the tokens may be locked as collateral in exchange for {Derivative} loans, as proposed in NFTX litepaper, similarly to Maker vaults. This still follows the general minting pattern of removing transferability of the {Base} tokens in exchange for {Derivative} tokens.</p>

<h3 id="burning">Burning</h3>
<p>Burning requires the transfer of {Base} tokens out of the {Pool} in exchange for burning {Derivative} tokens. The burn functions are distinguished by the quantity and quality of {Base} tokens redeemed.</p>
<ul>
  <li>For burning without specifying the <code class="language-plaintext highlighter-rouge">id</code>: <code class="language-plaintext highlighter-rouge">burn</code>, <code class="language-plaintext highlighter-rouge">batchBurn</code>.</li>
  <li>For burning with specifying the <code class="language-plaintext highlighter-rouge">id</code>(s): <code class="language-plaintext highlighter-rouge">idBurn</code>, <code class="language-plaintext highlighter-rouge">batchIdBurn</code>.</li>
</ul>

<p>By allowing for specific ids to be targeted, higher value {Base} tokens may be selected out of the pool. NFTX proposes an additional fee to be applied for such targeted withdrawals, to offset the desire to drain the {Pool} of {Base} tokens worth more than the floor price.</p>

<h3 id="pricing">Pricing</h3>
<p>Prices should not be necessarily fixed. therefore, Mint/Burn events MUST include the ERC-20 <code class="language-plaintext highlighter-rouge">_value</code> minted/burned.</p>

<p>Existing pricing implementations are as follows (measured in base:derivative):</p>
<ul>
  <li>Equal: Every {Base} costs 1 {Derivative}
    <ul>
      <li>NFTX</li>
      <li>Wrapped Kitties</li>
    </ul>
  </li>
  <li>Proportional
    <ul>
      <li>NFT20 sets a fixed rate of 100 {Base} tokens per {Derivative} token.</li>
    </ul>
  </li>
  <li>Variable
    <ul>
      <li>NFT20 also allows for Dutch auctions when minting.</li>
      <li>NFTX proposes an additional fee to be paid when targeting the id of the {Base} token.</li>
    </ul>
  </li>
</ul>

<p>Due to the variety of pricing implementations, the Mint* and Burn* events MUST include the number {Derivative} tokens minted/burned.</p>

<h3 id="inheritance">Inheritance</h3>
<h4 id="erc-20">ERC-20</h4>
<p>The {Wrapper} MAY inherit from {ERC20}, in order to directly call <code class="language-plaintext highlighter-rouge">super.mint</code> and <code class="language-plaintext highlighter-rouge">super.burn</code>.
If the {Wrapper} does not inherit from {ERC20}, the {Derivative} contract MUST be limited such that the {Wrapper} has the sole power to <code class="language-plaintext highlighter-rouge">mint</code>, <code class="language-plaintext highlighter-rouge">burn</code>, and otherwise change the supply of tokens.</p>

<h4 id="erc721receiver-erc1155receiver">ERC721Receiver, ERC1155Receiver</h4>
<p>If not inheriting from {ERC721Receiver} and/or {ERC1155Receiver}, the pool MUST be limited such that the base tokens can only be transferred via the Wrapper’s <code class="language-plaintext highlighter-rouge">mint</code>, <code class="language-plaintext highlighter-rouge">burn</code>.</p>

<p>There exists only one of each ERC-721 token of with a given (address, id) pair. However, ERC-1155 tokens of a given (address, id) may have quantities greater than 1. Accordingly, the meaning of “Single” and “Batch” in each standard varies. In both standards, “single” refers to a single id, and “batch” refers to multiple ids. In ERC-1155, a single id event/function may involve multiple tokens, according to the <code class="language-plaintext highlighter-rouge">value</code> field.</p>

<p>In building a common set of events and functions, we must be aware of these differences in implementation. The current implementation treats ERC-721 tokens as a special case where, in reference to the quantity of each {Base} token:</p>
<ul>
  <li>All parameters named <code class="language-plaintext highlighter-rouge">_amount</code>, MUST be <code class="language-plaintext highlighter-rouge">1</code>.</li>
  <li>All parameters named <code class="language-plaintext highlighter-rouge">_amounts</code> MUST be either an empty list or a list of <code class="language-plaintext highlighter-rouge">1</code> with the same length as <code class="language-plaintext highlighter-rouge">_ids</code>.</li>
</ul>

<p>This keeps a consistent enumeration of tokens along with ERC-1155. Alternative implementations include:</p>
<ul>
  <li>A common interface with specialized functions. EX: <code class="language-plaintext highlighter-rouge">mintFromERC721</code>.</li>
  <li>Separate interfaces for each type. EX: <code class="language-plaintext highlighter-rouge">ERC721Wrapper</code>, <code class="language-plaintext highlighter-rouge">ERC1155Wrapper</code>.</li>
</ul>

<h4 id="erc721-erc1155">ERC721, ERC1155</h4>
<p>The {Wrapper} MAY inherit from {ERC721} and/or {ERC1155} in order to call <code class="language-plaintext highlighter-rouge">super.mint</code>, directly. This is optional as minting {Base} tokens is not required in this standard. An “Initial NFT Offering” could use this to create a set of {Base} tokens within the contract, and directly distribute {Derivative} tokens.</p>

<p>If the {Wrapper} does not inherit from {ERC721} or {ERC1155}, it MUST include calls to {IERC721} and {IERC1155} in order to transfer {Base} tokens.</p>

<h3 id="approval">Approval</h3>
<p>All of the underlying transfer methods are not tied to the {Wrapper}, but rather call the ERC-20/721/1155 transfer methods. Implementations of this standard MUST:</p>
<ul>
  <li>Either implement {Derivative} transfer approval for burning, and {Base} transfer approval for minting.</li>
  <li>Or check for Approval outside of the {Wrapper} through {IERC721} / {IERC1155} before attempting to execute.</li>
</ul>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>
<p>Most existing implementations inherit from ERC-20, using functions <code class="language-plaintext highlighter-rouge">mint</code> and <code class="language-plaintext highlighter-rouge">burn</code>.
Events:</p>
<ul>
  <li>Mint
    <ul>
      <li>WK: DepositKittyAndMintToken</li>
      <li>NFTX: Mint</li>
    </ul>
  </li>
  <li>Burn
    <ul>
      <li>WK: BurnTokenAndWithdrawKity</li>
      <li>NFTX: Redeem</li>
    </ul>
  </li>
</ul>

<h2 id="reference-implementation">Reference Implementation</h2>
<p><a href="https://github.com/ashrowz/erc-3386">ERC-3386 Reference Implementation</a></p>

<h2 id="security-considerations">Security Considerations</h2>
<p>Wrapper contracts are RECOMMENDED to inherit from burnable ERC-20 tokens. If they are not, the supply of the {Derivative} tokens MUST be controlled by the Wrapper. Similarly, price implementations MUST ensure that the supply of {Base} tokens is reflected by the {Derivative} tokens.</p>

<p>With the functions <code class="language-plaintext highlighter-rouge">idBurn</code>, <code class="language-plaintext highlighter-rouge">idBurns</code>, users may target the most valuable NFT within the generic lot.  If there is a significant difference between tokens values of different ids, the contract SHOULD consider creating specialized pools (NFTX) or pricing (NFT20) to account for this.</p>

<h2 id="copyright">Copyright</h2>
<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
