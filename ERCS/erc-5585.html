<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>ERC-721 NFT Authorization | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="ERC-721 NFT Authorization | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-5585" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-5585" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">ERC-721 NFT Authorization</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p>This EIP separates the <a href="./eip-721.md">ERC-721</a> NFT’s commercial usage rights from its ownership to allow for the independent management of those rights.</p>

<h2 id="motivation">Motivation</h2>

<p>Most NFTs have a simplified ownership verification mechanism, with a sole owner of an NFT. Under this model, other rights, such as display, or creating derivative works or distribution, are not possible to grant, limiting the value and commercialization of NFTs. Therefore, the separation of an NFT’s ownership and user rights can enhance its commercial value.</p>

<p>Commercial right is a broad concept based on the copyright, including the rights of copy, display, distribution, renting, commercial use, modify, reproduce and sublicense etc.  With the development of the Metaverse, NFTs are becoming more diverse, with new use cases such as digital collections, virtual real estate, music, art, social media, and digital asset of all kinds. The copyright and authorization based on NFTs are becoming a potential business form.</p>

<h2 id="specification">Specification</h2>

<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY” and “OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>

<h3 id="contract-interface">Contract Interface</h3>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">interface</span> <span class="n">IERC5585</span> <span class="p">{</span>

    <span class="k">struct</span> <span class="n">UserRecord</span> <span class="p">{</span>
        <span class="kt">address</span> <span class="n">user</span><span class="p">;</span>
        <span class="kt">string</span><span class="p">[]</span> <span class="n">rights</span><span class="p">;</span>
        <span class="kt">uint256</span> <span class="n">expires</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">/// @notice Get all available rights of this NFT project
</span>    <span class="c1">/// @return All the rights that can be authorized to the user
</span>    <span class="k">function</span> <span class="n">getRights</span><span class="p">()</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">string</span><span class="p">[]);</span>

    <span class="c1">/// @notice NFT holder authorizes all the rights of the NFT to a user for a specified period of time
</span>    <span class="c1">/// @dev The zero address indicates there is no user
</span>    <span class="c1">/// @param tokenId The NFT which is authorized
</span>    <span class="c1">/// @param user The user to whom the NFT is authorized
</span>    <span class="c1">/// @param duration The period of time the authorization lasts
</span>    <span class="k">function</span> <span class="n">authorizeUser</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">duration</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="c1">/// @notice NFT holder authorizes specific rights to a user for a specified period of time
</span>    <span class="c1">/// @dev The zero address indicates there is no user. It will throw exception when the rights are not defined by this NFT project
</span>    <span class="c1">/// @param tokenId The NFT which is authorized
</span>    <span class="c1">/// @param user The user to whom the NFT is authorized
</span>    <span class="c1">/// @param rights Rights authorized to the user, such as renting, distribution or display etc
</span>    <span class="c1">/// @param duration The period of time the authorization lasts
</span>    <span class="k">function</span> <span class="n">authorizeUser</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">rights</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">duration</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>
    
    <span class="c1">/// @notice The user of the NFT transfers his rights to the new user
</span>    <span class="c1">/// @dev The zero address indicates there is no user
</span>    <span class="c1">/// @param tokenId The rights of this NFT is transferred to the new user
</span>    <span class="c1">/// @param newUser The new user
</span>    <span class="k">function</span> <span class="n">transferUserRights</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">newUser</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="c1">/// @notice NFT holder extends the duration of authorization
</span>    <span class="c1">/// @dev The zero address indicates there is no user. It will throw exception when the rights are not defined by this NFT project
</span>    <span class="c1">/// @param tokenId The NFT which has been authorized
</span>    <span class="c1">/// @param user The user to whom the NFT has been authorized
</span>    <span class="c1">/// @param duration The new duration of the authorization
</span>    <span class="k">function</span> <span class="n">extendDuration</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">duration</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="c1">/// @notice NFT holder updates the rights of authorization
</span>    <span class="c1">/// @dev The zero address indicates there is no user
</span>    <span class="c1">/// @param tokenId The NFT which has been authorized
</span>    <span class="c1">/// @param user The user to whom the NFT has been authorized
</span>    <span class="c1">/// @param rights New rights authorized to the user
</span>    <span class="k">function</span> <span class="n">updateUserRights</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">rights</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="c1">/// @notice Get the authorization expired time of the specified NFT and user
</span>    <span class="c1">/// @dev The zero address indicates there is no user
</span>    <span class="c1">/// @param tokenId The NFT to get the user expires for
</span>    <span class="c1">/// @param user The user who has been authorized
</span>    <span class="c1">/// @return The authorization expired time
</span>    <span class="k">function</span> <span class="n">getExpires</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint</span><span class="p">);</span>

    <span class="c1">/// @notice Get the rights of the specified NFT and user
</span>    <span class="c1">/// @dev The zero address indicates there is no user
</span>    <span class="c1">/// @param tokenId The NFT to get the rights
</span>    <span class="c1">/// @param user The user who has been authorized
</span>    <span class="c1">/// @return The rights has been authorized
</span>    <span class="k">function</span> <span class="n">getUserRights</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">string</span><span class="p">[]);</span>

    <span class="c1">/// @notice The contract owner can update the number of users that can be authorized per NFT
</span>    <span class="c1">/// @param userLimit The number of users set by operators only
</span>    <span class="k">function</span> <span class="n">updateUserLimit</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">userLimit</span><span class="p">)</span> <span class="k">external</span> <span class="n">onlyOwner</span><span class="p">;</span>

    <span class="c1">/// @notice resetAllowed flag can be updated by contract owner to control whether the authorization can be revoked or not 
</span>    <span class="c1">/// @param resetAllowed It is the boolean flag
</span>    <span class="k">function</span> <span class="n">updateResetAllowed</span><span class="p">(</span><span class="kt">bool</span> <span class="n">resetAllowed</span><span class="p">)</span> <span class="k">external</span> <span class="n">onlyOwner</span><span class="p">;</span>

    <span class="c1">/// @notice Check if the token is available for authorization
</span>    <span class="c1">/// @dev Throws if tokenId is not a valid NFT
</span>    <span class="c1">/// @param tokenId The NFT to be checked the availability
</span>    <span class="c1">/// @return true or false whether the NFT is available for authorization or not
</span>    <span class="k">function</span> <span class="n">checkAuthorizationAvailability</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">)</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">bool</span><span class="p">);</span>

    <span class="c1">/// @notice Clear authorization of a specified user
</span>    <span class="c1">/// @dev The zero address indicates there is no user. The function  works when resetAllowed is true and it will throw exception when false  
</span>    <span class="c1">/// @param tokenId The NFT on which the authorization based
</span>    <span class="c1">/// @param user The user whose authorization will be cleared
</span>    <span class="k">function</span> <span class="n">resetUser</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="n">user</span><span class="p">)</span> <span class="k">external</span><span class="p">;</span>


    <span class="c1">/// @notice Emitted when the user of a NFT is changed or the authorization expires time is updated
</span>    <span class="c1">/// param tokenId The NFT on which the authorization based
</span>    <span class="c1">/// param indexed user The user to whom the NFT authorized
</span>    <span class="c1">/// @param rights Rights authorized to the user
</span>    <span class="c1">/// @param expires The expires time of the authorization
</span>    <span class="k">event</span> <span class="n">authorizeUser</span><span class="p">(</span><span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">tokenId</span><span class="p">,</span> <span class="kt">address</span> <span class="k">indexed</span> <span class="n">user</span><span class="p">,</span> <span class="kt">string</span><span class="p">[]</span> <span class="n">rights</span><span class="p">,</span> <span class="kt">uint</span> <span class="n">expires</span><span class="p">);</span>

    <span class="c1">/// @notice Emitted when the number of users that can be authorized per NFT is updated
</span>    <span class="c1">/// @param userLimit The number of users set by operators only
</span>    <span class="k">event</span> <span class="n">updateUserLimit</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">userLimit</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">getRights()</code> function MAY be implemented as pure and view.</p>

<p>The <code class="language-plaintext highlighter-rouge">authorizeUser(uint256 tokenId, address user, uint duration)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">authorizeUser(uint256 tokenId, address user, string[] rights; uint duration)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">transferUserRights(uint256 tokenId, address newUser)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">extendDuration(uint256 tokenId, address user, uint duration)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">updateUserRights(uint256 tokenId, address user, string[] rights)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">getExpires(uint256 tokenId, address user)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">pure</code> or <code class="language-plaintext highlighter-rouge">view</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">getUserRights(uint256 tokenId, address user)</code> function MAY be implemented as pure and view.</p>

<p>The <code class="language-plaintext highlighter-rouge">updateUserLimit(unit256 userLimit)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">updateResetAllowed(bool resetAllowed)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">checkAuthorizationAvailability(uint256 tokenId)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">pure</code> or <code class="language-plaintext highlighter-rouge">view</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">resetUser(uint256 tokenId, address user)</code> function MAY be implemented as <code class="language-plaintext highlighter-rouge">public</code> or <code class="language-plaintext highlighter-rouge">external</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">authorizeUser</code> event MUST be emitted when the user of a NFT is changed or the authorization expires time is updated.</p>

<p>The <code class="language-plaintext highlighter-rouge">updateUserLimit</code> event MUST be emitted when the number of users that can be authorized per NFT is updated.</p>

<h2 id="rationale">Rationale</h2>

<p>First of all, NFT contract owner can set the maximum number of authorized users to each NFT and whether the NFT owner can cancel the authorization at any time to protect the interests of the parties involved.</p>

<p>Secondly, there is a <code class="language-plaintext highlighter-rouge">resetAllowed</code> flag to control the rights between the NFT owner and the users for the contract owner. If the flag is set to true, then the NFT owner can disable usage rights of all authorized users at any time.</p>

<p>Thirdly, the rights within the user record struct is used to store what rights has been authorized to a user by the NFT owner, in other words, the NFT owner can authorize a user with specific rights and update it when necessary.</p>

<p>Finally, this design can be seamlessly integrated with third parties. It is an extension of ERC-721, therefore it can be easily integrated into a new NFT project. Other projects can directly interact with these interfaces and functions to implement their own types of transactions. For example, an announcement platform could use this EIP to allow all NFT owners to make authorization or deauthorization at any time.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>This standard is compatible with <a href="./eip-721.md">ERC-721</a> since it is an extension of it.</p>

<h2 id="security-considerations">Security Considerations</h2>

<p>When the <code class="language-plaintext highlighter-rouge">resetAllowed</code> flag is false, which means the authorization can not be revoked by NFT owner during the period of authorization, users of the EIP need to make sure the authorization fee can be fairly assigned if the NFT was sold to a new holder.</p>

<p>Here is a solution for taking reference: the authorization fee paid by the users can be held in an escrow contract for a period of time depending on the duration of the authorization. For example, if the authorization duration is 12 months and the fee in total is 10 ETH, then if the NFT is transferred after 3 months, then only 2.5 ETH would be sent and the remaining 7.5 ETH would be refunded.</p>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
