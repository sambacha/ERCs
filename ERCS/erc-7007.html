<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Verifiable AI-Generated Content Token | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="Verifiable AI-Generated Content Token | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-7007" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-7007" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Verifiable AI-Generated Content Token</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p>The verifiable AI-generated content (AIGC) non-fungible token (NFT) standard is an extension of the <a href="./eip-721.md">ERC-721</a> token standard for AIGC. It proposes a set of interfaces for basic interactions and enumerable interactions for AIGC-NFTs. The standard includes a <code class="language-plaintext highlighter-rouge">mint</code> and <code class="language-plaintext highlighter-rouge">verify</code> function interface, a new <code class="language-plaintext highlighter-rouge">Mint</code> event, optional <code class="language-plaintext highlighter-rouge">Enumerable</code> and <code class="language-plaintext highlighter-rouge">Updatable</code> extensions, and a JSON schema for AIGC-NFT metadata. Additionally, it incorporates Zero-Knowledge Machine Learning (zkML) and Optimistic Machine Learning (opML) capabilities to enable verification of AIGC data correctness. In this standard, the <code class="language-plaintext highlighter-rouge">tokenId</code> is indexed by the <code class="language-plaintext highlighter-rouge">prompt</code>.</p>

<h2 id="motivation">Motivation</h2>

<p>The verifiable AIGC-NFT standard aims to extend the existing <a href="./eip-721.md">ERC-721</a> token standard to accommodate the unique requirements of AI-generated content NFTs representing models in a collection. This standard provides interfaces to use zkML or opML to verify whether or not the AIGC data for an NFT is generated from a certain ML model with a certain input (prompt). The proposed interfaces allow for additional functionality related to minting, verifying, and enumerating AIGC-NFTs. Additionally, the metadata schema provides a structured format for storing information related to AIGC-NFTs, such as the prompt used to generate the content and the proof of ownership.</p>

<p>This standard supports two primary types of proofs: validity proofs and fraud proofs. In practice, zkML and opML are commonly employed as the prevailing instances for these types of proofs. Developers can choose their preferred ones.</p>

<p>In the zkML scenario, this standard enables model owners to publish their trained model and its ZKP verifier to Ethereum. Any user can claim an input (prompt) and publish the inference task. Any node that maintains the model and the proving circuit can perform the inference and proving, and submit the output of inference and the ZK proof for the inference trace to the verifier. The user that initiates the inference task will own the output for the inference of that model and input (prompt).</p>

<p>In the opML scenario, this standard enables model owners to publish their trained model to Ethereum. Any user can claim an input (prompt) and publish the inference task. Any node that maintains the model can perform the inference and submit the inference output. Other nodes can challenge this result within a predefined challenge period. At the end of the challenge period, the user can verify that they own the output for the inference of that model and prompt.</p>

<p>This capability is especially beneficial for AI model authors and AI content creators seeking to capitalize on their creations. With this standard, every input prompt and its resulting content can be securely verified on the blockchain. This opens up opportunities for implementing revenue-sharing mechanisms for all AI-generated content (AIGC) NFT sales. AI model authors can now share their models without concerns that open-sourcing will diminish their financial value.</p>

<p>An example workflow of a zkML AIGC NFT project compliant with this proposal is as follows:</p>

<p><img src="../assets/eip-7007/workflow.png" alt="zkML Suggested Workflow" /></p>

<p>There are 4 components in this workflow:</p>
<ul>
  <li>ML model - contains weights of a pre-trained model; given an inference input, generates the output</li>
  <li>zkML prover - given an inference task with input and output, generates a ZK proof</li>
  <li>AIGC-NFT smart contract - contract compliant with this proposal, with full <a href="./eip-721.md">ERC-721</a> functionalities</li>
  <li>Verifier smart contract - implements a <code class="language-plaintext highlighter-rouge">verify</code> function, given an inference task and its ZK proof, returns the verification result as a boolean</li>
</ul>

<h2 id="specification">Specification</h2>

<p>The keywords “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119 and RFC 8174.</p>

<p><strong>Every compliant contract must implement the <code class="language-plaintext highlighter-rouge">IERC7007</code>, <a href="./eip-721.md"><code class="language-plaintext highlighter-rouge">ERC721</code></a>, and <a href="./eip-165.md"><code class="language-plaintext highlighter-rouge">ERC165</code></a> interfaces.</strong></p>

<p>The verifiable AIGC-NFT standard includes the following interfaces:</p>

<p><code class="language-plaintext highlighter-rouge">IERC7007</code>: Defines a <code class="language-plaintext highlighter-rouge">mint</code> function and a <code class="language-plaintext highlighter-rouge">Mint</code> event for minting AIGC-NFTs. Defines a <code class="language-plaintext highlighter-rouge">verify</code> function to check the validity of the combination of prompt and aigcData using zkML/opML techniques.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">18</span><span class="p">;</span>

<span class="cm">/**
 * @dev Required interface of an ERC7007 compliant contract.
 * Note: the ERC-165 identifier for this interface is 0x7e52e423.
 */</span>
<span class="k">interface</span> <span class="n">IERC7007</span> <span class="k">is</span> <span class="n">IERC165</span><span class="p">,</span> <span class="n">IERC721</span> <span class="p">{</span>
    <span class="cm">/**
     * @dev Emitted when `tokenId` token is minted.
     */</span>
    <span class="k">event</span> <span class="n">Mint</span><span class="p">(</span>
        <span class="kt">address</span> <span class="k">indexed</span> <span class="n">to</span><span class="p">,</span>
        <span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">tokenId</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">indexed</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="n">aigcData</span><span class="p">,</span>
        <span class="kt">string</span> <span class="n">uri</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="n">proof</span>
    <span class="p">);</span>

    <span class="cm">/**
     * @dev Mint token at `tokenId` given `to`, `prompt`, `aigcData`, `uri`, and `proof`. `proof` means that we input the ZK proof when using zkML and byte zero when using opML as the verification method.
     *
     * Requirements:
     * - `tokenId` must not exist.'
     * - verify(`prompt`, `aigcData`, `proof`) must return true.
     *
     * Optional:
     * - `proof` should not include `aigcData` to save gas.
     */</span>
    <span class="k">function</span> <span class="n">mint</span><span class="p">(</span>
        <span class="kt">address</span> <span class="n">to</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">aigcData</span><span class="p">,</span>
        <span class="kt">string</span> <span class="k">calldata</span> <span class="n">uri</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">proof</span>
    <span class="p">)</span> <span class="k">external</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">);</span>

    <span class="cm">/**
     * @dev Verify the `prompt`, `aigcData`, and `proof`.
     */</span>
    <span class="k">function</span> <span class="n">verify</span><span class="p">(</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">aigcData</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">proof</span>
    <span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="optional-extension-enumerable">Optional Extension: Enumerable</h3>

<p>The <strong>enumeration extension</strong> is OPTIONAL for <a href="./eip-7007.md">ERC-7007</a> smart contracts. This allows your contract to publish its full list of mapping between <code class="language-plaintext highlighter-rouge">tokenId</code> and <code class="language-plaintext highlighter-rouge">prompt</code> and make them discoverable.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">18</span><span class="p">;</span>

<span class="cm">/**
 * @title ERC7007 Token Standard, optional enumeration extension
 * Note: the ERC-165 identifier for this interface is 0xfa1a557a.
 */</span>
<span class="k">interface</span> <span class="n">IERC7007Enumerable</span> <span class="k">is</span> <span class="n">IERC7007</span> <span class="p">{</span>
    <span class="cm">/**
     * @dev Returns the token ID given `prompt`.
     */</span>
    <span class="k">function</span> <span class="n">tokenId</span><span class="p">(</span><span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">prompt</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">);</span>

    <span class="cm">/**
     * @dev Returns the prompt given `tokenId`.
     */</span>
    <span class="k">function</span> <span class="n">prompt</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">tokenId</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">string</span> <span class="k">calldata</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="optional-extension-updatable">Optional Extension: Updatable</h3>

<p>The <strong>updatable extension</strong> is OPTIONAL for <a href="./eip-7007.md">ERC-7007</a> smart contracts. This allows your contract to update a token’s <code class="language-plaintext highlighter-rouge">aigcData</code> in the case of opML, where <code class="language-plaintext highlighter-rouge">aigcData</code> content might change over the challenge period.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">pragma</span> <span class="n">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">18</span><span class="p">;</span>

<span class="cm">/**
 * @title ERC7007 Token Standard, optional updatable extension
 */</span>
<span class="k">interface</span> <span class="n">IERC7007Updatable</span> <span class="k">is</span> <span class="n">IERC7007</span> <span class="p">{</span>
    <span class="cm">/**
     * @dev Update the `aigcData` of `prompt`.
     */</span>
    <span class="k">function</span> <span class="n">update</span><span class="p">(</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">aigcData</span><span class="p">,</span>
        <span class="kt">string</span> <span class="k">calldata</span> <span class="n">uri</span>
    <span class="p">)</span> <span class="k">external</span><span class="p">;</span>

    <span class="cm">/**
     * @dev Emitted when `tokenId` token is updated.
     */</span>
    <span class="k">event</span> <span class="n">Update</span><span class="p">(</span>
        <span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">tokenId</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">indexed</span> <span class="n">prompt</span><span class="p">,</span>
        <span class="kt">bytes</span> <span class="k">indexed</span> <span class="n">aigcData</span><span class="p">,</span>
        <span class="kt">string</span> <span class="n">uri</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="erc-7007-metadata-json-schema-for-reference">ERC-7007 Metadata JSON Schema for reference</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AIGC Metadata"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identifies the asset to which this NFT represents"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Describes the asset to which this NFT represents"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A URI pointing to a resource with mime type image/* representing the asset to which this NFT represents. Consider making any images at a width between 320 and 1080 pixels and aspect ratio between 1.91:1 and 4:5 inclusive."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"prompt"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identifies the prompt from which this AIGC NFT generated"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"aigc_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/video/audio..."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"aigc_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A URI pointing to a resource with mime type image/* representing the asset to which this AIGC NFT represents."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"proof_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"validity (zkML) or fraud (opML)"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="ml-model-publication">ML Model Publication</h3>

<p>While this standard does not describe the Machine Learning model publication stage, it is natural and recommended to publish the commitment of the Model to Ethereum separately, before any actual <code class="language-plaintext highlighter-rouge">mint</code> actions. The model commitment schema choice lies on the AIGC-NFT project issuer party. The commitment should be checked inside the implementation of the <code class="language-plaintext highlighter-rouge">verify</code> function.</p>

<h2 id="rationale">Rationale</h2>

<h3 id="unique-token-identification">Unique Token Identification</h3>

<p>This specification sets the <code class="language-plaintext highlighter-rouge">tokenId</code> to be the hash of its corresponding <code class="language-plaintext highlighter-rouge">prompt</code>, creating a deterministic and collision-resistant way to associate tokens with their unique content generation parameters. This design decision ensures that the same prompt (which corresponds to the same AI-generated content under the same model seed) cannot be minted more than once, thereby preventing duplication and preserving the uniqueness of each NFT within the ecosystem.</p>

<h3 id="generalization-to-different-proof-types">Generalization to Different Proof Types</h3>

<p>This specification accommodates two proof types: validity proofs for zkML and fraud proofs for opML. Function arguments in <code class="language-plaintext highlighter-rouge">mint</code> and <code class="language-plaintext highlighter-rouge">verify</code> are designed for generality, allowing for compatibility with both proof systems. Moreover, the specification includes an updatable extension that specifically serves the requirements of opML.</p>

<h3 id="verify-interface"><code class="language-plaintext highlighter-rouge">verify</code> interface</h3>

<p>We specify a <code class="language-plaintext highlighter-rouge">verify</code> interface to enforce the correctness of <code class="language-plaintext highlighter-rouge">aigcData</code>. It is defined as a view function to reduce gas cost. <code class="language-plaintext highlighter-rouge">verify</code> should return true if and only if <code class="language-plaintext highlighter-rouge">aigcData</code> is finalized in both zkML and opML. In zkML, it must verify the ZK proof, i.e. <code class="language-plaintext highlighter-rouge">proof</code>; in opML, it must make sure that the challenging period is finalized, and that the <code class="language-plaintext highlighter-rouge">aigcData</code> is up-to-date, i.e. has been updated after finalization. Additionally, <code class="language-plaintext highlighter-rouge">proof</code> can be <em>empty</em> in opML.</p>

<h3 id="mint-interface"><code class="language-plaintext highlighter-rouge">mint</code> interface</h3>

<p>We specify a <code class="language-plaintext highlighter-rouge">mint</code> interface to bind the prompt and <code class="language-plaintext highlighter-rouge">aigcData</code> with <code class="language-plaintext highlighter-rouge">tokenId</code>. Notably, it acts differently in zkML and opML cases. In zkML, <code class="language-plaintext highlighter-rouge">mint</code> should make sure <code class="language-plaintext highlighter-rouge">verify</code> returns <code class="language-plaintext highlighter-rouge">true</code>. While in opML, it can be called before finalization. The consideration here is that, limited by the proving difficulty, zkML usually targets simple model inference tasks in practice, making it possible to provide a proof within an acceptable time frame. On the other hand, opML enables large model inference tasks, with a cost of longer confirmation time to achieve the approximate same security level. Mint until opML finalization may not be the best practice considering the existing optimistic protocols.</p>

<h3 id="naming-choice-on-update">Naming Choice on <code class="language-plaintext highlighter-rouge">update</code></h3>

<p>We adopt “update” over “finalize” because a successful challenge happens rarely in practice. Using <code class="language-plaintext highlighter-rouge">update</code> could avoid calling it for every <code class="language-plaintext highlighter-rouge">tokenId</code> and save gas.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>This standard is backward compatible with the <a href="./eip-721.md">ERC-721</a> as it extends the existing functionality with new interfaces.</p>

<h2 id="test-cases">Test Cases</h2>

<p>The reference implementation includes sample implementations of the <a href="./eip-7007.md">ERC-7007</a> interfaces under <code class="language-plaintext highlighter-rouge">contracts/</code> and corresponding unit tests under <code class="language-plaintext highlighter-rouge">test/</code>. This repo can be used to test the functionality of the proposed interfaces and metadata schema.</p>

<h2 id="reference-implementation">Reference Implementation</h2>

<ul>
  <li>ERC-7007 for <a href="../assets/eip-7007/contracts/ERC7007Zkml.sol">zkML</a> and <a href="../assets/eip-7007/contracts/ERC7007Opml.sol">opML</a></li>
  <li><a href="../assets/eip-7007/contracts/ERC7007Enumerable.sol">ERC-7007 Enumerable Extension</a></li>
</ul>

<h2 id="security-considerations">Security Considerations</h2>

<h3 id="frontrunning-risk">Frontrunning Risk</h3>

<p>To address the risk of frontrunning, where an actor could potentially observe and preemptively claim a prompt during the minting process, implementers of this proposal must incorporate a secure prompt-claiming mechanism. Implementations could include time-locks, commit-reveal schemes, or other anti-frontrunning techniques to ensure equitable and secured claim processes for AIGC-NFTs.</p>

<h3 id="aigc-data-change-during-challenge-period">AIGC Data Change During Challenge Period</h3>

<p>In the opML scenario, it is important to consider that the <code class="language-plaintext highlighter-rouge">aigcData</code> might change during the challenge period due to disputes or updates. The updatable extension defined here provides a way to handle these updates. Implementations must ensure that updates to <code class="language-plaintext highlighter-rouge">aigcData</code> are treated as critical state changes that require adherence to the same security and validation protocols as the initial minting process. Indexers should always check for any <code class="language-plaintext highlighter-rouge">Update</code> event emission.</p>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
