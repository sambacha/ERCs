<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Tokenized Reserve | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="Tokenized Reserve | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-7425" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-7425" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Tokenized Reserve</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p>This specification explains a tokenized reserve mechanism standard. Current smart contracts record transactions and are made public. The reserve will implement added functionality allowing stakeholders proactively to audit a contract. Using <a href="./eip-4626.md">ERC-4626</a>, stakeholders can create shares to show support for actions in the contract.</p>

<h2 id="motivation">Motivation</h2>

<p>Tokenized vaults store <a href="./eip-20.md">ERC-20</a> tokens that are represented by shares within vault contracts. Implementations can follow the <a href="./eip-4626.md">ERC-4626</a> standard to provide basic functionality for depositing, withdrawing, and reading balances for a vault. As tokenization becomes increasingly popular, applications should use a form of tokenized vaults to store assets and allow all parties to track performance.</p>

<p>This specification introduces a standard for an on-chain reserve that uses tokenized vaults to represent reserve stakeholders. Core functionality, which is an extension of <a href="./eip-4626.md">ERC-4626</a>, will provide stakeholders representation by depositing and withdrawing from the vault. The record of transactions for other <a href="./eip-20.md">ERC-20</a> assets should be easily accessible to any party for auditing.</p>

<p>In a tokenized reserve, stakeholders are represented by minting shares from the vault. The goal is to create a reserve similar to a real-world reserve fund used as a contingency for an entity. In most cases, an entity would follow criteria like running low on regular funds, to utilize the reserve fund. In a decentralized environment, an entity should incorporate stakeholders as criteria. Assets associated with the reserve as well as its origin will vary in decentralized environments, so transparent auditing is needed.</p>

<h2 id="specification">Specification</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119 and RFC 8174.</p>

<h3 id="definitions">Definitions:</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- owner: The creator of the reserve
- user: Stakeholders participating in policies
- reserve: The assets held on the contract other than underlying token
- policies: Created by reserve owners to encourage stakeholder participation
</code></pre></div></div>

<h3 id="constructor">Constructor:</h3>

 	- name: ERC-20 token name
  	- ticker: ERC-20 ticker
   	- asset: ERC-4626 underlying ERC-20 address
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- rAuth: Authorized user, for cases utilizing more than one owner/ limiting owner withdrawals
- rOwner: Owner of the Reserve
</code></pre></div></div>

<h3 id="interface">Interface</h3>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// SPDX-License-Identifier: CC0-1.0
</span>
<span class="k">import</span> <span class="s">"./ERC4626.sol"</span><span class="p">;</span>
    
<span class="k">interface</span> <span class="n">TokenReserve</span> <span class="k">is</span> <span class="n">ERC4626</span><span class="p">{</span>

	<span class="cm">/**
	* @dev Event emitted after a new policy is created
	*/</span>
	<span class="k">event</span> <span class="n">policies</span><span class="p">(</span>
	    	<span class="kt">address</span> <span class="k">indexed</span> <span class="n">token</span><span class="p">,</span>
	    	<span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">policyNum</span><span class="p">,</span>
	    	<span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">amount</span><span class="p">,</span>
		<span class="kt">address</span> <span class="n">recipient</span>
	<span class="p">);</span>

	<span class="cm">/**
	* @dev Event emitted after a new deposit is made by the owner
	*/</span>
	<span class="k">event</span> <span class="n">depositR</span><span class="p">(</span>
		<span class="kt">address</span> <span class="k">indexed</span> <span class="n">token</span><span class="p">,</span>
	    	<span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">amount</span><span class="p">,</span>
	    	<span class="kt">uint256</span> <span class="k">indexed</span> <span class="n">time</span><span class="p">,</span>
	    	<span class="kt">uint256</span> <span class="n">count</span>
	<span class="p">);</span>

	<span class="cm">/** 
	* @dev Get time a deposit/withdrawal was made by the owner
	* @param count Number for deposit count
	* @return block.timestamp format
	*/</span>
	<span class="k">function</span> <span class="n">ownerTime</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">count</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/** 
	* @dev Get amount deposited to reserve by owner
	* @param count Number for deposit count
	* @param policy The policy number to deposit to
	* @return uint256 Amount of an asset that was deposited
	*/</span>
	<span class="k">function</span> <span class="n">ownerDeposit</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">count</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Amount withdrawn for a opened policy by the owner
	* @param policy The policy number
	* @return Amount of ERC20
	*/</span>
	<span class="k">function</span> <span class="n">ownerWithdrawals</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Token type deposited to reserve by owner
	* - MUST be an address of ERC20 token
	* @param count Number of deposit count
	* @return address Address of ERC20 token
	*/</span>
	<span class="k">function</span> <span class="n">tokenDeposit</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">count</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">address</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Amount deposited to a policy for shares
	* - MUST be an ERC20 token
	* @param user Address of user
	* @param policy The policy number the user deposited to
	* @return uint256 Amount of ERC20 deposited
	*/</span>
	<span class="k">function</span> <span class="n">userDeposit</span><span class="p">(</span><span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
    	* @dev Amount withdrawn from a policy by the user
	* @param user The address of user
    	* @param policy The policy number for user withdrawal
	* @param uint256 Amount of ERC20
    	*/</span>
    	<span class="k">function</span> <span class="n">userWithdrawals</span><span class="p">(</span><span class="kt">address</span> <span class="n">user</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">public</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Token type withdrawn for an opened policy by the owner
	* - MUST be ERC20 address
	* @param policy The policy number for the token used
	* @return Token ERC20 address
	*/</span>
	<span class="k">function</span> <span class="n">policyToken</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span><span class="p">(</span><span class="kt">address</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Make a deposit to a policy creating new shares using deposit function from ERC4626
	* - MUST be opened policy
	* - MUST NOT be opened policy that was closed
	* - SHOULD be only method to deposit to ERC4626 vault
	* NOTE: using the deposit() will cause assets to not be accounted for in a policy (see Security Considerations section)
	* @param assets Amount being deposited
	* @param receiver Address of depositor
	* @param policy The number associated policy
	* @return Amount of shares minted 
	*/</span>
	<span class="k">function</span> <span class="n">policyDeposit</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">assets</span><span class="p">,</span> <span class="kt">address</span> <span class="n">receiver</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span> <span class="k">external</span> <span class="k">virtual</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Burn shares, receive 1 to 1 value of shares using withdraw function from ERC4626
	* - MUST have userDeposit greater than or equal to userWithdrawal
	* - SHOULD be only method for withdrawing from ERC4626 vault
	* @param assets Amount being deposited
	* @param receiver Address of receiver
	* @param owner Address of token owner
	* @param policy Number associated policy
	* @return Amount of the asset
	*/</span>
	<span class="k">function</span> <span class="n">withdrawPolicy</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">assets</span><span class="p">,</span> <span class="kt">address</span> <span class="n">receiver</span><span class="p">,</span> <span class="kt">address</span> <span class="n">owner</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">)</span><span class="k">external</span> <span class="k">virtual</span> <span class="k">returns</span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Issue new policy
	* - MUST create new policy number
	* - MUST account for amount withdrawn
	* - MUST be only method to withdraw ERC20 tokens (excluding underlying ERC4626 token)
	* - MUST be owner
	* - SHOULD emit policies event
	* @param token Address of ERC-20 token
	* @param amount Token amount being withdrawn
	* @param receiver Address of token recipient
	* @return The policy number
	*/</span>
	<span class="k">function</span> <span class="n">openPolicy</span><span class="p">(</span><span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">,</span> <span class="kt">address</span> <span class="n">receiver</span><span class="p">)</span> <span class="k">external</span> <span class="k">virtual</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">uint256</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Make a deposit and/or close an opened policy
	* - MUST be owner
	* - MUST account for amount received
	* - SHOULD emit policies event
	* @param token Address of ERC-20 token
	* @param policy Number of the desired policy
	* @param amount Token amount being deposited to the reserve
	* @param close Choose to close the policy
	* @return True for closed policy 
	*/</span>
	<span class="k">function</span> <span class="n">closePolicy</span><span class="p">(</span><span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">policy</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">close</span><span class="p">)</span> <span class="k">external</span> <span class="k">virtual</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bool</span><span class="p">)</span>

	<span class="cm">/**
	* @dev Accounting for tokens deposited by owner
	* - MUST be reserve owner
	* - SHOULD emit depositR event
	* NOTE: No shares are issued, funds can not be redeemed and no policy is opened. Withdrawnal made with openPolicy function.
	* @param token Address of ERC-20 token being deposited
	* @param sender Address of token sender
	* @param amount Token amount being deposited 
	*/</span>
	<span class="k">function</span> <span class="n">depositReserve</span><span class="p">(</span><span class="kt">address</span> <span class="n">token</span><span class="p">,</span> <span class="kt">address</span> <span class="n">sender</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">amount</span><span class="p">)</span> <span class="k">external</span> <span class="k">virtual</span>
<span class="p">}</span>
    
</code></pre></div></div>

<h2 id="rationale">Rationale</h2>

<p>This proposed standard is designed to be a core implementation of a tokenized reserve interface. Other non-specified conditions should be addressed on a case-by-case basis. Each reserve uses <a href="./eip-20.md">ERC-20</a> standard for shares, and <a href="./eip-4626.md">ERC-4626</a> for the creation of shares. The reserve token SHOULD be considered as either the underlying <code class="language-plaintext highlighter-rouge">asset</code> for the <a href="./eip-4626.md">ERC-4626</a> vault or the shares that are created when depositing to the vault. 
<a href="./eip-4626.md">ERC-4626</a> is used to create a transparent creation of stakeholders of the reserve. There MUST be a representation of interested parties in the reserve. The implementer can decide how to treat representation based on users entering and leaving the vault. For example, a user could be forced not to use the same tokens in multiple policies to allow shares to be distributed fairly.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>Tokenized reserves are made compatible with <a href="./eip-20.md">ERC-20</a> and <a href="./eip-4626.md">ERC-4626</a>.</p>

<h2 id="security-considerations">Security Considerations</h2>

<p>Tokenized reserves share the same security considerations as <a href="./eip-20.md">ERC-20</a> and <a href="./eip-4626.md">ERC-4626</a>.</p>

<ol>
  <li>Assests withdrawn by owner are not secured by vaults.
    <ul>
      <li>Stakeholders SHOULD be aware that the underlying <code class="language-plaintext highlighter-rouge">asset</code> can be withdrawn by the owner with no restrictions or authorizing party, like requiring an <code class="language-plaintext highlighter-rouge">rAuth</code>. Depending on the authorizing implementation, <code class="language-plaintext highlighter-rouge">asset</code> may still be withdrawn by the owner.</li>
    </ul>
  </li>
</ol>

<p>A RECOMMENDED implementation:</p>
<ul>
  <li>The <code class="language-plaintext highlighter-rouge">openPolicy</code> MUST explictly restrict the transfer of the underlying <code class="language-plaintext highlighter-rouge">asset</code>.</li>
  <li>If the underlying asset is apart of the reserve and not the vault,
the reserve MUST provide a method to avoid user <code class="language-plaintext highlighter-rouge">asset</code> loss.</li>
</ul>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
