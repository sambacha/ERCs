<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title>Trusted Hint Registry | Ethereum Improvement Proposals</title>
    <meta
      property="og:title"
      content="Trusted Hint Registry | Ethereum Improvement Proposals"
    />
    <meta name="description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta property="og:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
    <meta name="twitter:description" content="Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards." />
  
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="http://localhost:4000/ERCS/erc-7506" />
  <meta property="og:url" content="http://localhost:4000/ERCS/erc-7506" />
  <meta property="og:site_name" content="Ethereum Improvement Proposals" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "http://localhost:4000",
      "name": "Ethereum Improvement Proposals",
      "description": "Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="/assets/css/style.css" /><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ethereum Improvement Proposals" /><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/override.css" />
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
</head>
<body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/">Ethereum Improvement Proposals</a><nav class="site-nav d-flex">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger row p-2"><a class="page-link col" href="/all">All</a><a class="page-link col" href="/core">Core</a><a class="page-link col" href="/networking">Networking</a><a class="page-link col" href="/interface">Interface</a><a class="page-link col" href="/erc">ERC</a><a class="page-link col" href="/meta">Meta</a><a class="page-link col" href="/informational">Informational</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Trusted Hint Registry</h1>
  </header>

  <div class="post-content">
    <h2 id="abstract">Abstract</h2>

<p>This EIP standardizes a system for managing on-chain metadata (hints), enabling claim interpretation, reliability, 
and verification. It structures these hints within defined namespaces and lists, enabling structured organization and 
retrieval, as well as permissioned write access. The system permits namespace owners to delegate hint management tasks, 
enhancing operational flexibility. It incorporates secure meta transactions via <a href="./eip-712.md">EIP-712</a>-enabled 
signatures and offers optional ENS integration for trust verification and discoverability. The interface is equipped to
emit specific events for activities like hint modifications, facilitating easy traceability of changes to hints. This 
setup aims to provide a robust, standardized framework for managing claim- and ecosystem-related metadata, essential for 
maintaining integrity and trustworthiness in decentralized environments.</p>

<h2 id="motivation">Motivation</h2>

<p>In an increasingly interconnected and decentralized landscape, the formation of trust among entities remains a critical
concern. Ecosystems, both on-chain and off-chain—spanning across businesses, social initiatives, and other organized
frameworks—frequently issue claims for or about entities within their networks. These claims serve as the foundational
elements of trust, facilitating interactions and transactions in environments that are essentially untrustworthy by
nature. While the decentralization movement has brought about significant improvements around trustless technologies,
many ecosystems building on top of these are in need of technologies that build trust in their realm. Real-world
applications have shown that verifiable claims alone are not enough for this purpose. Moreover, a supporting layer of
on-chain metadata is needed to support a reliable exchange and verification of those claims.</p>

<p>The absence of a structured mechanism to manage claim metadata on-chain poses a significant hurdle to the formation and 
maintenance of trust among participating entities in an ecosystem. This necessitates the introduction of a layer of 
on-chain metadata, which can assist in the reliable verification and interpretation of these claims. Termed “hints” in 
this specification, this metadata can be used in numerous ways, each serving to bolster the integrity and reliability 
of the ecosystem’s claims. Hints can perform various tasks, such as providing revocation details, identifying trusted 
issuers, or offering timestamping hashes. These are just a few examples that enable ecosystems to validate and 
authenticate claims, as well as verify data integrity over time.</p>

<p>The proposed “Trusted Hint Registry” aims to provide a robust, flexible, and standardized interface for managing such
hints. The registry allows any address to manage multiple lists of hints, with a set of features that not only make it
easier to create and manage these hints but also offer the flexibility of delegating these capabilities to trusted
entities. In practice, this turns the hint lists into dynamic tools adaptable to varying requirements and use cases.
Moreover, an interface has been designed with a keen focus on interoperability, taking into consideration existing W3C
specifications around Decentralized Identifiers and Verifiable Credentials, as well as aligning with on-chain projects
like the Ethereum Attestation Service.</p>

<p>By providing a standardized smart contract interface for hint management, this specification plays an integral role in
enabling and scaling trust in decentralized ecosystems. It offers a foundational layer upon which claims — both on-chain
and off-chain — can be reliably issued, verified, and interpreted, thus serving as an essential building block for the
credible operation of any decentralized ecosystem. Therefore, the Trusted Hint Registry is not just an addition to the
ecosystem but a necessary evolution in the complex topology of decentralized trust.</p>

<h2 id="specification">Specification</h2>

<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and
“OPTIONAL” in this document are to be interpreted as described in RFC 2119.</p>

<p>This EIP specifies a contract called <code class="language-plaintext highlighter-rouge">TrustedHintRegistry</code> and standardizes a set of <strong>REQUIRED</strong> core hint functions,
while also providing a common set of <strong>OPTIONAL</strong> management functions, enabling various ways for collaborative hint 
management. Ecosystems <strong>MAY</strong> use this specification to build their own hint registry contracts with ecosystem-specific, 
non-standardized features. Governance is deliberately excluded from this ERC and <strong>MAY</strong> be implemented according to an
ecosystem’s need.</p>

<h3 id="definitions">Definitions</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">claim</code>: A claim is a statement about an entity made by another entity.</li>
  <li><code class="language-plaintext highlighter-rouge">hint</code>: A “hint” refers to a small piece of information that provides insights, aiding in the interpretation, 
 reliability, or verifiability of decentralized ecosystem data.</li>
  <li><code class="language-plaintext highlighter-rouge">namespace</code>: A namespace is a representation of an Ethereum address inside the registry that corresponds to its
owner’s address. A namespace contains hint lists for different use cases.</li>
  <li><code class="language-plaintext highlighter-rouge">hint list</code>: A hint list is identified by a unique value that contains a number of hint keys that resolve to hint
values. An example of this is a revocation key that resolves to a revocation state.</li>
  <li><code class="language-plaintext highlighter-rouge">hint key</code>: A hint key is a unique value that resolves to a hint value. An example of this is a trusted issuer
identifier, which resolves to the trust status of that identifier.</li>
  <li><code class="language-plaintext highlighter-rouge">hint value</code>: A hint value expresses data about an entity in an ecosystem.</li>
  <li><code class="language-plaintext highlighter-rouge">delegate</code>: An Ethereum address that has been granted writing permissions to a hint list by its owner.</li>
</ul>

<h3 id="interface">Interface</h3>

<h4 id="hint-management">Hint Management</h4>

<h5 id="gethint">getHint</h5>

<p>A method with the following signature <strong>MUST</strong> be implemented that returns the hint value in a hint list of a namespace.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">getHint</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes32</span><span class="p">);</span>
</code></pre></div></div>

<h5 id="sethint">setHint</h5>

<p>A method with the following signature <strong>MUST</strong> be implemented that changes the hint value in a hint list of a namespace.
An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set metadata 
together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHint</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethintsigned">setHintSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes the hint value in a hint list of a namespace
with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section. An overloaded
method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set metadata together with the
hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethints">setHints</h5>

<p>A method with the following signature <strong>MUST</strong> be implemented that changes multiple hint values in a hint list of a
namespace. An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set
metadata together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHints</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_keys</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_values</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethintssigned">setHintsSigned</h5>

<p>A method with the following signature <strong>MUST</strong> be implemented that multiple hint values in a hint list of a namespace
with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section. An overloaded
method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set metadata together with the
hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintsSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_keys</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_values</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="delegated-hint-management">Delegated Hint Management</h4>

<p>A namespace owner can add delegate addresses to specific hint lists in their namespace. These delegates <strong>SHALL</strong> have
write access to the specific lists via a specific set of methods.</p>

<h5 id="sethintdelegated">setHintDelegated</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes the hint value in a hint list of a namespace
for pre-approved delegates. An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be
implemented to set metadata together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintDelegated</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethintdelegatedsigned">setHintDelegatedSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes the hint value in a hint list of a namespace
for pre-approved delegates with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions
section. An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set
metadata together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintDelegatedSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethintsdelegated">setHintsDelegated</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes multiple hint values in a hint list of a
namespace for pre-approved delegates. An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter
<strong>MAY</strong> be implemented to set metadata together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintsDelegated</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_keys</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_values</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="sethintsdelegatedsigned">setHintsDelegatedSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that has multiple hint values in a hint list of a namespace
for pre-approved delegates with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions
section. An overloaded method with an additional <code class="language-plaintext highlighter-rouge">bytes calldata _metadata</code> parameter <strong>MAY</strong> be implemented to set
metadata together with the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setHintsDelegatedSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_keys</span><span class="p">,</span> <span class="kt">bytes32</span><span class="p">[]</span> <span class="k">calldata</span> <span class="n">_values</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="hint-list-management">Hint List Management</h4>

<h5 id="setliststatus">setListStatus</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes the validity state of a hint list. This
enables one to (un)-revoke a whole list of hint values.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setListStatus</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">_revoked</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="setliststatussigned">setListStatusSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that changes the validity state of a hint list with a raw
signature. This enables one to (un)-revoke a whole list of hint values.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setListStatusSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">_revoked</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="setlistowner">setListOwner</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that transfers the ownership of a trust list to another
address. Changing the owner of a list <strong>SHALL NOT</strong> change the namespace the hint list resides in, to retain references
of paths to a hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setListOwner</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_newOwner</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="setlistownersigned">setListOwnerSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented that transfers the ownership of a trust list to another
address with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section. Changing
the owner of a list <strong>SHALL NOT</strong> change the namespace the hint list resides in, to retain references to paths to a hint
value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setListOwnerSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_newOwner</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="addlistdelegate">addListDelegate</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to add a delegate to an owner’s hint list in a namespace.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">addListDelegate</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_delegate</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_untilTimestamp</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="addlistdelegatesigned">addListDelegateSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to add a delegate to an owner’s hint list in a namespace
with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">addListDelegateSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_delegate</span><span class="p">,</span> <span class="kt">uint256</span> <span class="n">_untilTimestamp</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="removelistdelegate">removeListDelegate</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to remove a delegate from an owner’s revocation hint list
in a namespace.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">removeListDelegate</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_delegate</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="removelistdelegatesigned">removeListDelegateSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to remove a delegate from an owner’s revocation hint list
in a namespace with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">removeListDelegateSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_delegate</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="metadata-management">Metadata Management</h4>

<h5 id="getmetadata">getMetadata</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to retrieve metadata for a hint.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">getMetadata</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">)</span> <span class="k">external</span> <span class="k">view</span> <span class="k">returns</span> <span class="p">(</span><span class="kt">bytes</span> <span class="k">memory</span><span class="p">);</span>
</code></pre></div></div>

<h5 id="setmetadata">setMetadata</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to set metadata for a hint.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setMetadata</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_metadata</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="setmetadatasigned">setMetadataSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to set metadata for a hint with a raw signature. The raw
signature <strong>MUST</strong> be generated following the Meta Transactions section.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setMetadataSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_metadata</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="setmetadatadelegated">setMetadataDelegated</h4>

<p>A method with the following signature <strong>MAY</strong> be implemented to set metadata for a hint as a pre-approved delegate of
the hint list.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setMetadataDelegated</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_metadata</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h5 id="setmetadatadelegatedsigned">setMetadataDelegatedSigned</h5>

<p>A method with the following signature <strong>MAY</strong> be implemented to set metadata for a hint as a pre-approved delegate of
the hint list with a raw signature. The raw signature <strong>MUST</strong> be generated following the Meta Transactions section.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">setMetadataDelegatedSigned</span><span class="p">(</span><span class="kt">address</span> <span class="n">_namespace</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_list</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_key</span><span class="p">,</span> <span class="kt">bytes32</span> <span class="n">_value</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_metadata</span><span class="p">,</span> <span class="kt">address</span> <span class="n">_signer</span><span class="p">,</span> <span class="kt">bytes</span> <span class="k">calldata</span> <span class="n">_signature</span><span class="p">)</span> <span class="k">public</span><span class="p">;</span>
</code></pre></div></div>

<h4 id="events">Events</h4>

<h5 id="hintvaluechanged">HintValueChanged</h5>

<p><strong>MUST</strong> be emitted when a hint value has changed.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">event</span> <span class="n">HintValueChanged</span><span class="p">(</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">namespace</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">list</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">key</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="n">value</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="hintlistownerchanged">HintListOwnerChanged</h5>

<p><strong>MUST</strong> be emitted when the owner of a list has changed.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">event</span> <span class="n">HintListOwnerChanged</span><span class="p">(</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">namespace</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">list</span><span class="p">,</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">newOwner</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="hintlistdelegateadded">HintListDelegateAdded</h5>

<p><strong>MUST</strong> be emitted when a delegate has been added to a hint list.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">event</span> <span class="n">HintListDelegateAdded</span><span class="p">(</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">namespace</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">list</span><span class="p">,</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">newDelegate</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="hintlistdelegateremoved">HintListDelegateRemoved</h5>

<p><strong>MUST</strong> be emitted when a delegate has been removed from a hint list.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">event</span> <span class="n">HintListDelegateRemoved</span><span class="p">(</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">namespace</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">list</span><span class="p">,</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">oldDelegate</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="hintliststatuschanged">HintListStatusChanged</h5>

<p><strong>MUST</strong> be emitted when the validity status of the hint list has been changed.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">event</span> <span class="n">HintListStatusChanged</span><span class="p">(</span>
  <span class="kt">address</span> <span class="k">indexed</span> <span class="n">namespace</span><span class="p">,</span>
  <span class="kt">bytes32</span> <span class="k">indexed</span> <span class="n">list</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="k">indexed</span> <span class="n">revoked</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="meta-transactions">Meta Transactions</h3>

<p>This section uses the following terms:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">transaction signer</code></strong>: An Ethereum address that signs arbitrary data for the contract to execute <strong>BUT</strong> does not
commit the transaction.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">transaction sender</code></strong>: An Ethereum address that takes signed data from a <strong>transaction signer</strong> and commits it
wrapped in a transaction to the smart contract.</li>
</ul>

<p>A <strong>transaction signer</strong> <strong>MAY</strong> be able to deliver a signed payload off-band to a <strong>transaction sender</strong> that initiates
the Ethereum interaction with the smart contract. The signed payload <strong>MUST</strong> be limited to being used only
once (see Signed Hash and Nonce).</p>

<h4 id="signed-hash">Signed Hash</h4>

<p>The signature of the <strong>transaction signer</strong> <strong>MUST</strong> conform to <a href="./eip-712.md">EIP-712</a>. This helps users understand
what the payload they are signing consists of, and it provides protection against replay attacks.</p>

<h4 id="nonce">Nonce</h4>

<p>This EIP <strong>RECOMMENDS</strong> the use of a <strong>dedicated nonce mapping</strong> for meta transactions. If the signature of the 
<strong>transaction sender</strong> and its meta-contents are verified, the contract increases a nonce for this 
<strong>transaction signer</strong>. This effectively removes the possibility for any other sender to execute the same transaction 
again with another wallet.</p>

<h3 id="trust-anchor-via-ens">Trust Anchor via ENS</h3>

<p>Ecosystems that use an Ethereum Name Service (ENS) domain can increase trust by using ENS entries to share information
about a hint list registry. This method takes advantage of the ENS domain’s established credibility to make it easier to
find a reliable hint registry contract, as well as the appropriate namespace and hint list customized for particular
ecosystem needs. Implementing a trust anchor through ENS is <strong>OPTIONAL</strong>.</p>

<p>For each use case, a specific ENS subdomain <strong>SHALL</strong> be created only used for a specific hint list, e.g.,
“trusted-issuers.ens.eth”. The following records <strong>SHALL</strong> be set:</p>

<ul>
  <li>ADDRESS ETH - address of the trusted hint registry contract</li>
  <li>TEXT - key: “hint.namespace”; value: owner address of namespace</li>
</ul>

<p>The following records <strong>MAY</strong> be set:</p>

<ul>
  <li>TEXT - key: “hint.list”; value: bytes32 key of hint list</li>
  <li>TEXT - key: “hint.key”; value: bytes32 key of hint key</li>
  <li>TEXT - key: “hint.value”; value: bytes32 key of hint value</li>
  <li>ABI - ABI of trusted hint registry contract</li>
</ul>

<p>To create a two-way connection, a namespace owner <strong>SHALL</strong> set metadata referencing the ENS subdomain hash for the hint
list. Metadata <strong>SHALL</strong> be set in the owners namespace, hint list <code class="language-plaintext highlighter-rouge">0x0</code>, and hint key <code class="language-plaintext highlighter-rouge">0x0</code> where the value is the
ENS subdomain keccak256 hash.</p>

<p>By establishing this connection, a robust foundation for trust and discovery within an ecosystem is created.</p>

<h2 id="rationale">Rationale</h2>

<p>Examining the method signatures reveals a deliberate architecture and data hierarchy within this ERC: A namespace
address maps to a hint list, which in turn maps to a hint key, which then reveals the hint value.</p>

<div class="language-solidity highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//     namespace          hint list          hint key    hint value
</span><span class="k">mapping</span><span class="p">(</span><span class="kt">address</span> <span class="o">=&gt;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">bytes32</span> <span class="o">=&gt;</span> <span class="k">mapping</span><span class="p">(</span><span class="kt">bytes32</span> <span class="o">=&gt;</span> <span class="kt">bytes32</span><span class="p">)))</span> <span class="n">hints</span><span class="p">;</span>
</code></pre></div></div>

<p>This structure is designed to implicitly establish the initial ownership of all lists under a given namespace,
eliminating the need for subsequent claiming actions. As a result, it simplifies the process of verifying and enforcing
write permissions, thereby reducing potential attack surfaces. Additional data structures must be established and
validated for features like delegate management and ownership transfer of hint lists. These structures won’t affect the
main namespace layout; rather, they serve as a secondary mechanism for permission checks.</p>

<p>One of the primary objectives of this ERC is to include management features, as these significantly influence the ease
of collaboration and maintainability of hint lists. These features also enable platforms to hide complexities while
offering user-friendly interfaces. Specifically, the use of meta-transactions allows users to maintain control over
their private keys while outsourcing the technical heavy lifting to platforms, which is achieved simply by signing an
<a href="./eip-712.md">EIP-712</a> payload.</p>

<h2 id="backwards-compatibility">Backwards Compatibility</h2>

<p>No backward compatibility issues found.</p>

<h2 id="security-considerations">Security Considerations</h2>

<h3 id="meta-transactions-1">Meta Transactions</h3>

<p>The signature of signed transactions could potentially be replayed on different chains or deployed versions of the
registry implementing this ERC. This security consideration is addressed by the usage
of <a href="./eip-712.md">EIP-712</a>.</p>

<h3 id="rights-management">Rights Management</h3>

<p>The different roles and their inherent permissions are meant to prevent changes from unauthorized entities. The hint
list owner should always be in complete control over its hint list and who has writing access to it.</p>

<h3 id="governance">Governance</h3>

<p>It is recognized that ecosystems might have processes in place that might also apply to changes in hint lists. This ERC
explicitly leaves room for implementers or users of the registry to apply a process that fits the requirements of their
ecosystem. Possible solutions can be an extension of the contract with governance features around specific methods, the
usage of multi-sig wallets, or off-chain processes enforced by an entity.</p>

<h2 id="copyright">Copyright</h2>

<p>Copyright and related rights waived via <a href="/LICENSE">CC0</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ethereum Improvement Proposals</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ethereum Improvement Proposals</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/ethereum/EIPs"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">ethereum/EIPs</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Ethereum Improvement Proposals (EIPs) describe standards for the Ethereum platform, including core protocol specifications, client APIs, and contract standards.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
